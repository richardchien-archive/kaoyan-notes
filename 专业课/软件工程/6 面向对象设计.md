# 面向对象设计

## 面向对象的设计模型

设计建模过程：

- 架构设计
- 包和子系统设计
- 类设计
- 持久化设计

### 构件图

### 部署图

### 状态机图

## 架构设计

4+1 架构视图：

- 逻辑视图：表示软件的逻辑结构，用于支持功能性需求，即系统应该向用户提供的服务
- 进程视图：表示软件的进程架构，关注的是非功能性需求，例如性能和可用性
- 开发视图：表示软件的开发架构，关注在软件开发环境中软件模块的实际组织方式
- 物理视图（部署视图）：表示软件的物理架构，关注的是非功能需求，例如可用性、可靠性、性能、可扩展性等
- 场景视图（用例视图）：将上面 4 个视图有机结合，对其进行验证，观察能否在用例的实例下将它们集成到一起

## 包和子系统设计

### 包设计原则

内聚性原则：

- 重用-发布等价原则：一个包中的所有元素，即类和接口，被当成单一的可重用单元看待，要么全都能被重用，要么都不能被重用
- 共同重用原则：实际上是类设计的“接口隔离原则”在包上的扩展，即不要把用户不会用到的类和需要用到的类放在同一个包中
- 共同封闭原则：指在同一个包中的所有类应该对同类型变更封闭，当某项变更影响到一个包时，会影响到这个包中的所有类，但不会影响到这个包之外的任何类

耦合性原则：

- 无环依赖原则：发生依赖循环时，有两种解决方案：
    - 将循环依赖中的部分类独立出来，创建一个新的包
    - 应用“依赖倒置原则”，将依赖关系逆转
- 稳定依赖原则：包之间应该朝着稳定的方向依赖，每个包应该只依赖比它更稳定的包
- 稳定抽象原则：指最稳定的包应该是最抽象的包，不稳定的包应该是具体的包，（稳定）接口应和（易变）实现分开

## 类设计

### 类设计原则

- 单一职责原则：每个类都应该只有一个职责
- 里氏替换原则：子类必须能够替换父类，任何能够传给父类的参数都能传给子类，任何子类返回的值都是一种父类返回值的类型
- 依赖倒置原则：高层模块不应该依赖于低层模块，它们都应该依赖于抽象；抽象不应该依赖于细节，细节应该依赖于抽象
- 接口隔离原则：指客户端不应该被迫依赖它们不需要使用的接口，类与类的依赖关系应该建立在最小的接口上
- 开放关闭原则：类、模块、函数等，应该对扩展开放，对修改关闭
